<html>
<head>
<style>
code {
  font-family: Consolas,"courier new";
  color: crimson;
  background-color: #f1f1f1;
  padding: 2px;
  font-size: 105%;
}
</style>
</head>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript">
async function switch1status()
{
theUrl='https://switchserver.herokuapp.com/retrievestatus?query=on'
        let response = await fetch(
          theUrl
        );
        let data = await response.json();
        console.log(data);
        return data;


}
function switch1(){
axios.get("/https://switchserver.herokuapp.com/retrievestatus?query=on")
        .then(response => {
        result=response.data;
          if(result['switch1']===true)
          {document.getElementById('1').value='ON';;
          }
          if(result['switch1']===false)
          {document.getElementById('1').value='OFF';}
        }).catch(error => console.error(error));
}


function toggle(button)
{
  if(document.getElementById("1").value=="OFF"){
   document.getElementById("1").value="ON";
   theUrl='https://switchserver.herokuapp.com/switch1?query=on'
   var xmlHttp = new XMLHttpRequest();
   xmlHttp.open( "GET", theUrl, true );
   xmlHttp.onreadystatechange = function (oEvent) {
    if (xmlHttp.readyState === 4) {
        if (xmlHttp.status === 200) {
          console.log(xmlHttp.responseText)
        } else {
           console.log("Error", xmlHttp.statusText);
        }
    }
    };
    console.log(xmlHttp.responseText);
    xmlHttp.send();
   if (xmlHttp.status == 0)
    console.log(xmlHttp.responseText);

}

  else if(document.getElementById("1").value=="ON"){
   document.getElementById("1").value="OFF";
   theUrl='https://switchserver.herokuapp.com/switch1?query=off'
   var xmlHttp = new XMLHttpRequest();
   xmlHttp.open( "GET", theUrl, true );
   xmlHttp.onreadystatechange = function (oEvent) {
    if (xmlHttp.readyState === 4) {
        if (xmlHttp.status === 200) {
          console.log(xmlHttp.responseText)
        } else {
           console.log("Error", xmlHttp.statusText);
        }
    }
    };
    console.log(xmlHttp.responseText);
    xmlHttp.send();
   if (xmlHttp.status == 0)
    console.log(xmlHttp.responseText);
   }
}
</script>
<body>
<p><code>Lightbulb</code></p>
<form action="">
<input type="button" id="1" value="ON" style="color:blue"
       onclick="toggle(this);">

</form>
<form>
    <input type="button" id="11" value="refresh" style="color:blue"
       onclick="switch1();" >
</form>

</body>

<script type="text/javascript">
function switch2status()
{
theUrl='https://switchserver.herokuapp.com/retrievestatus?query=on'
   var xmlHttp = new XMLHttpRequest();
   xmlHttp.open( "GET", theUrl, true );
   xmlHttp.send(null);
   var result = JSON.parse(xmlHttp.responseText);
   if(result['switch2']==true)
   {document.getElementById("2").value="ON";}
   if(result['switch2']==false)
   {document.getElementById("2").value="OFF";}
}


function toggle2(button)
{
  if(document.getElementById("2").value=="OFF"){
   document.getElementById("2").value="ON";
   theUrl='https://switchserver.herokuapp.com/switch2?query=on'
   var xmlHttp = new XMLHttpRequest();
   xmlHttp.open( "GET", theUrl, true );
   xmlHttp.send(null);

   }

  else if(document.getElementById("2").value=="ON"){
   document.getElementById("2").value="OFF";
   theUrl='https://switchserver.herokuapp.com/switch2?query=off'
   var xmlHttp = new XMLHttpRequest();
   xmlHttp.open( "GET", theUrl, true );
   xmlHttp.send(null);
   }
}
</script>
<body>
<p><code>fan</code></p>
<form action="">
<input type="button" id="2" value="ON" style="color:blue"
       onclick="toggle2(this);">
    <input type="button" id="21" value="refresh" style="color:blue"
       onclick="switch2status();" >
</form>
</body>

</html>